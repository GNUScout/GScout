{% extends 'socios/form_base.html' %}
{% block navbar-content %}	
	<li><a href="/">Home</a></li>
	<li class="active"><a href="/socios/new">Nuevo Socio</a></li>
	<li ><a href="/socios/listado">Listado Socios</a></li>
	<li><a href="/socios/listado_del">Borrar Socios</a></li>
	<li><a href="/socios/search_familia">Editar Familias</a></li>	
	<li><a href="/socios/search">Buscar ID</a></li>  
{% endblock %}
{% block form-head %}
<script src="/static/js/jquery-1.9.1.js" type='text/javascript'></script>
</script>
<script LANGUAGE="JavaScript">

	var tabla = 0;
	
	var medicamentos=0;
	
	function clickNo() {
		$("#boton_add").hide();
		$("#boton_del").hide();
		medicamentos = 0;
		tabla=0;
		$("#todo").remove();
		item= "<div id='todo'><div id ='content'></div></div>"
		$("#boton_add").before(item)
	};
	function total_medicamentos(tableID) {
        var table = document.getElementById(tableID);
        medicamentos = table.rows.length;
		item= "<input id='total_medicamentos' type='hidden' name='total_medicamentos' value='"+medicamentos+"'>"
		$("#boton_add").before(item)
	};
	
	function addTable() {
		
		if (tabla == 0){
			//medicamentos = medicamentos + 1;
			tabla = 1;
			$("#boton_add").show();
			$("#boton_del").show();
			item=	"<TABLE id='dataTable' width='350px'>" +
						        "<TR>"+
						        	"<TD><INPUT type='checkbox' name='chk'/></TD>"+
						            "<td><input id='inputMedicamento"+medicamentos+"' type='text' name='m[]' placeholder='¿Cual?'></td>"+
									"<td><input type='text' name='md[]' placeholder='Dosis'></td>"+
									"<td><input type='text' name='mp[]' placeholder='Pauta'></td>"+
						        "</TR>"+
						    "</TABLE>";
			$("#content").before(item)
		}
	};	
	function addRow(tableID) {
 			
			$("#boton_add").show();
			$("#boton_del").show();
            var table = document.getElementById(tableID);
 
            medicamentos = table.rows.length;
            
            var row = table.insertRow(medicamentos);
 
            var colCount = table.rows[0].cells.length;
 
            for(var i=0; i<colCount; i++) {
 
                var newcell = row.insertCell(i);
 
                newcell.innerHTML = table.rows[0].cells[i].innerHTML;
                //alert(newcell.childNodes);
                switch(newcell.childNodes[0].type) {
                    case "text":
                            newcell.childNodes[0].value = "";
                            break;
                    case "checkbox":
                            newcell.childNodes[0].checked = false;
                            break;
                    case "select-one":
                            newcell.childNodes[0].selectedIndex = 0;
                            break;
                }
            }
       };
       
    function deleteRow(tableID) {
            try {
            var table = document.getElementById(tableID);
            medicamentos = table.rows.length;
 
            for(var i=0; i<medicamentos; i++) {
                var row = table.rows[i];
                var chkbox = row.cells[0].childNodes[0];
                if(null != chkbox && true == chkbox.checked) {
                    if(medicamentos <= 1) {
                        alert("Cannot delete all the rows.");
                        break;
                    }
                    table.deleteRow(i);
                    medicamentos--;
                    i--;
                    if (medicamentos == 0) {
						$("#boton_del").hide();
						$("#boton_add").hide();
						tabla=0;
						$("#todo").remove();
						item= "<div id='todo'><div id ='content'></div></div>"
						$("#boton_add").before(item)
					}
                }
 
 
            }
            }catch(e) {
                alert(e);
            }
        };
	

	


</script>
{% endblock %}
{% block form-title %}<h2 >Datos Médicos</h2>{% endblock %}
{% block form %}
				<form id="f1" method="post" class="form-horizontal" action="/socios/create_personal/">
					{% csrf_token %}
					<div class="control-group">
						<label class="control-label" for="inputSeguro">Tipo de seguro</label>
						<div class="controls">
							<input type="hidden" name="ss" value="">
							<input type="hidden" name="smp" value="">
						  	<input id="inputSeguro1" type="checkbox" name="ss" value="Seguridad social">	Seguridad social
						  	<br><input id="inputSeguro2" type="checkbox" name="smp" value="Seguro medico Privado">	Seguro médico privado</br>
						</div>
					</div>
					<div class="control-group">
						<label class="control-label" for="inputPoliza">Nº de Poliza</label>
						<div class="controls">
						  <input type="text" id="inputPoliza" name="n_poliza" placeholder="Nº de Poliza">
						</div>
					</div>
					<h4 align="center">Patologías específicas e intervenciones quirúrgicas</h4>
					<hr align="left" noshade="noshade" size="3" width="100%" />
					<div class="control-group">
						<label class="control-label">¿Padece o ha padecido alguna enfermedad?</label>
						<div class="controls">
							<label class="radio">
								<input type="radio" name="enfermedad" id="optionsRadios1" value="no" checked>
								No
							</label>
							<label class="radio">
								<input type="radio" name="enfermedad" id="optionsRadios2" value="si">
								Si
							</label>
						</div>
					</div>
					<div class="control-group">
						<label class="control-label" for="inputEnfermedad">¿Cual?</label>
						<div class="controls">
						  <textarea id="inputEnfermedad" name="t_enfermedad"></textarea>
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">¿Padece alguna enfermedad crónica, fisica o psíquica??</label>
						<div class="controls">
							<label class="radio">
								<input type="radio" name="enfermedad_cfp" id="optionsRadios1" value="no" checked>
								No
							</label>
							<label class="radio">
								<input type="radio" name="enfermedad_cfp" id="optionsRadios2" value="si">
								Si
							</label>
						</div>
					</div>
					<div class="control-group">
						<label class="control-label" for="inputCFP">¿Cual? ¿Y en que grado?</label>
						<div class="controls">
						  <textarea id="inputCFP" name="t_enfermedad_cfp"></textarea>
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">¿Esta operado?</label>
						<div class="controls">
							<label class="radio">
								<input type="radio" name="operado" id="optionsRadios1" value="no" checked>
								No
							</label>
							<label class="radio">
								<input type="radio" name="operado" id="optionsRadios2" value="si">
								Si
							</label>
						</div>
					</div>
					<div class="control-group">
						<label class="control-label" for="inputOperdado">¿De que?</label>
						<div class="controls">
						  <textarea id="inputOperado" name="t_operado"></textarea>
						</div>
					</div>
					<h4 align="center">Alergias y dietas específicas</h4>
					<hr align="left" noshade="noshade" size="3" width="100%" />
					<div class="control-group">
						<label class="control-label">¿Es alergico a algun tipo de medicamento?</label>
						<div class="controls">
							<label class="radio">
								<input type="radio" name="alergia" id="optionsRadios1" value="no" checked>
								No
							</label>
							<label class="radio">
								<input type="radio" name="alergia" id="optionsRadios2" value="si">
								Si
							</label>
						</div>
					</div>
					<div class="control-group">
						<label class="control-label" for="inputAlergia">¿Cual?</label>
						<div class="controls">
						  <textarea id="inputAlergia" name="t_alergia"></textarea>
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">¿Presenta mas alergias?</label>
						<div class="controls">
							<label class="radio">
								<input type="radio" name="otras_alergias" id="optionsRadios1" value="no" checked>
								No
							</label>
							<label class="radio">
								<input type="radio" name="otras_alergias" id="optionsRadios2" value="si">
								Si
							</label>
						</div>
					</div>
					<div class="control-group">
						<label class="control-label" for="inputOtrasAlergias">¿A que?</label>
						<div class="controls">
						  <textarea id="inputOtrasAlergias" name="t_otras_alergias"></textarea>
						</div>
					</div>
					<div class="control-group">
						<label class="control-label">¿Sigue algun regimen o dieta especial?</label>
						<div class="controls">
							<label class="radio">
								<input type="radio" name="dieta" id="optionsRadios1" value="no" checked>
								No
							</label>
							<label class="radio">
								<input type="radio" name="dieta" id="optionsRadios2" value="si">
								Si
							</label>
						</div>
					</div>
					<div class="control-group">
						<label class="control-label" for="inputDieta">¿Cual? Y motivos</label>
						<div class="controls">
						  <textarea id="inputDieta" name="t_dieta"></textarea>
						</div>
					</div>
					<h4 align="center">Medicación</h4>
					<hr align="left" noshade="noshade" size="3" width="100%" />
					<div class="control-group">
						<label class="control-label">¿Esta tomando actualmente algún medicamento?</label>
						<div class="controls">
							<label class="radio">
								<input type="radio" name="toma_medicamentos" id="medicamento1" onclick="clickNo()" value="no" checked>
								No
							</label>
							<label class="radio">
								<input type="radio" name="toma_medicamentos" id="medicamento2" onclick="addTable()" value="si">
								Si
							</label>
							
						</div>
					</div>
					<div id="todo">
						<div id ="content"></div>
					</div>
					<INPUT id="boton_add" type="button" value="Add Row" style="display:none" onclick="addRow('dataTable')" />
					<INPUT id="boton_del" type="button" value="Delete Row" style="display:none" onclick="deleteRow('dataTable')" />
					<hr align="left" noshade="noshade" size="3" width="100%" />
					<div class="control-group">
						<label class="control-label" for="inputInfo">Otra información de interes</label>
						<div class="controls">
						  <textarea id="inputInfo" name="info_adicional"></textarea>
						</div>
					</div>
					<input type="hidden" value="f4" name="form_id" />
					<div class="control-group">
						<div class="controls">
						  <button type="submit" class="btn" onclick="total_medicamentos('dataTable')">Finalizar</button>
						</div>
					</div>
				</form>				
{% endblock %}