%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Chapter 2: Título del capítulo 2
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

En el capítulo anterior se han introducido tanto los antecedentes como el estado actual del proyecto, 
se nombraron sus herramientas, actividades y periodos de desarrollo. Ahora nos vamos enfocar y describir lo que es el
entorno de desarrollo de la aplicación.\\

Partimos de una implementación en PHP (GNU Scout \cite{URL:GNUscout}), que poseía las funcionalidades básicas, pero el problema era que la base de datos
no era compatible con nuestra tecnología (Google App Engine), debido a que seguía el modelo entidad-relación, y nosotros al contrario, necesitábamos
crear una base de datos no relacional. Por otro lado teníamos de ejemplo la aplicación web \textbf{online scout manager} \cite{URL:OnlineScoutManager}, la cual era muy completa
pero era de pago, y nuestro objetivo era hacer una aplicación gratuita adaptada al cliente, en nuestro caso la organización de scout Aguere 70 de La Laguna.


%++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

\section{Bases de la aplicación}
\label{2:sec1}

La aplicación GScout esta programada principalmente en lenguaje Python, bajo el framework de Django-nonrel,  
ya que como se ha comentado antes se necesitaba este framework especifico para trabajar con bases de datos no relacionales,
debido a que usamos Google App Engine para el despliegue, y esta tecnología tiene como requerimiento que solo trabaja con
bases de datos no relacionales. \\

En un principio se había propuesto el uso de PivotalTracker para el seguimiento del desarrollo de la aplicación, 
pero como sólo había un desarrollador en proceso, se descartó la idea y se limito a tener un repositorio gestor de versiones por medio de
GitHub, donde se van guardando los cambios oportunos, y siguiendo la información de los ``commit'' se puede ver lo que se ha hecho.\\

Por otro lado el desarrollo del proyecto fue basado en metodologías ágiles, en el cual se realizaban una serie de iteraciones compuestas por diferentes fases, como 
las de planificación, análisis de requerimientos, diseño codificación, etc. De modo que al finalizar cada iteración se realizaba una evaluación y se repetía el ciclo una y otra vez,
con el fin de elaborar un producto que cumpla las expectativas y necesidades del cliente.\\

\section{Arquitectura Software}
\label{2:sec2}

En esta sección nos expandiremos en describir lo que es la arquitectura software de la aplicación, es decir el modelo y el framework de desarrollo.\\


\subsection{Modelo Template View (MTV)}
Empezaremos diciendo que la aplicación sigue el paradigma del modelo Template-View(\textbf{MTV}), que es una variante del modelo Vista-Controlador(\textbf{MVC}) que
se deriva de la forma en la que está implementada el framework de Django. Por esta razón, para entender el modelo MTV, primero tenemos que tener claro lo que es el modelo MVC, el cual se define de la siguiente manera:\\

\begin{itemize}
  \item \textbf{Modelo}: El modelo tiene como objetivo mapear a la base de datos de tal forma que crea una sincronización
			  entre la base de datos y la aplicación, con el fin de mantener actualizada toda la información de 
			  las tablas, campos, y datos de nuestra base. 
  \item \textbf{Controlador}: Responde a las peticiones y comunicaciones que existen entre los modelos y las vistas.
  \item \textbf{Vista}: Decide cómo se va a mostrar la información. 
\end{itemize}

Visto esto, el modelo Template-Vista funciona de la siguiente manera:\\


\begin{itemize}
  \item \textbf{Modelo}: Cumple la misma función que en el modelo anterior.
  \item \textbf{Template}: Es básicamente un archivo html que tiene como objetivo mostrar las respuestas enviadas por la vista.
  \item \textbf{Vista}: La vista tiene como objetivo recibir el requerimiento que es enviado por el navegador, procesar la información,
			 si es necesario realizar una petición al modelo para extraer un valor de la base de datos, entre otras funcionalidades, para posiblemente
			 devolver una respuesta a la template.
\end{itemize}


\subsection{Django}
Django es un framework de desarrollo web de código abierto, escrito en Python, que cumple en cierta medida el paradigma del Modelo Vista Controlador, 
pero específicamente el modelo que usa es el Modelo Template View. Fue desarrollado en origen para gestionar varias páginas orientadas a noticias de la World Company de Lawrence, Kansas, 
y fue liberada al público bajo una licencia BSD en julio de 2005; el framework fue nombrado en alusión al guitarrista de jazz gitano Django Reinhardt.\\

En la aplicación se usa una variante de este framework, \textbf{Django-nonrel}, debido a que la aplicación necesita gestionar una base de datos no relacional por requerimientos
de la propia tecnología Googgle App Engine, no soportada por la versión normal de Django.




\section{Herramientas de Desarrollo}
\label{2:sec3}

En este apartado se describirán las herramientas que se usaron para el despliegue, aumento de funcionalidad, 
gestión de versiones y repositorio, dinamismo en las plantillas y apariencia de la aplicación.\\

\subsection{Despliegue: Google App Engine}
Google App Engine nos permite realizar el despliegue de la aplicación web en la infraestructura de Google, con el objetivo de no usar ningún servidor.\\


Las aplicaciones en App Engine son fáciles de gestionar. Podemos proporcionar nuestro propio nombre de dominio (como, por ejemplo, http://www.example.com/) 
a través de Google Apps. También podemos proporcionarle un nombre que esté disponible en el dominio appspot.com. 
Además podremos limitar el acceso a la aplicación a un determinado grupo de miembros.\\

Google App Engine admite aplicaciones escritas en varios lenguajes de programación, incluido Python.\\

Las funciones que nos brinda Google App Engine son las siguientes:

\begin{itemize}
  \item Servidor web dinámico, totalmente compatible con las tecnologías web más comunes,
  \item Almacenamiento permanente con funciones de consulta, clasificación y transacciones,
  \item Escalado automático y distribución de carga,
  \item API para autenticar usuarios y enviar correo electrónico a través de Google Accounts,
  \item Un completo entorno de desarrollo local que simula Google App Engine en tu equipo,
  \item Colas de tareas que realizan trabajos fuera del ámbito de una solicitud web,
  \item Tareas programadas para activar eventos en momentos determinados y en intervalos regulares.
\end{itemize}

\subsection{Aumento funcionalidad: Google APIs}


En la aplicación se usaron dos APIs de Google para aumentar y mejorar su funcionalidad. 


\subsubsection{Google Plus}
Como GAE ya posee un modulo de autenticación por medio de Google Auth,
en el proyecto fue necesario modificarlo para que se hiciera por medio de Google Plus, generando unas credenciales que se guardaran en el gestor de usuarios
para que la aplicación pueda tener determinados permisos y poder obtener información que proporciona Google Plus. El objetivo de la incorporación de esta 
API a nuestra aplicación es evitar almacenar datos personales de los integrantes de la organización que usa la aplicación en una base de datos, sino usar directamente los
datos que nos proporciona Google Plus, como nombre, apellidos, foto de perfil, dirección, etc.

\subsubsection{Google Drive}
Uno de los objetivos de la aplicación en cuanto a funcionalidad era poder exportar una tabla filtrada o no con los datos de los socios. Como estamos utilizando tecnología Google,
decidimos que la mejor forma era utilizar la API de Google Drive, para crear documentos en formato de hoja de calculo en el entorno de Google Drive. Para ello fue necesario
modificar las credenciales que se almacenaban en los usuarios, para darle permiso y poder utilizar las funciones que nos proporciona dicha API.

\subsection{Gestión de versiones y repositorio: GitHub}

GitHub es un software para alojar proyectos utilizando el sistema de control de versiones Git. 
El código se almacena de forma pública, aunque también se puede hacer de forma privada, creando una cuenta de pago.\\

Nuestra aplicación esta alojada en un repositorio público que se facilitara en la sección de bibliografía.

\subsection{Dinamismo en las plantillas: JavaScript y JQuery}

En ocasiones es necesario crear dinamismo en las plantillas, para que el usuario pueda desenvolverse mejor con la interfaz de la aplicación, esto los conseguimos con el uso de las dos
tecnologías siguientes, JavaScript y jQuery, que además de mejorar la usabilidad de la aplicación, descargan parte de la funcionalidad de la aplicación en el navegador, 
liberando de esta manera al servidor de algunas tareas. A continuación de describirá cada una de estas tecnologías.\\

\subsubsection{JavaScript}
JavaScript es un lenguaje de programación interpretado, orientado a objetos, basado en prototipos, imperativo, débilmente tipado y dinámico. 
Se utiliza principalmente en su forma del lado del cliente (client-side), implementado como parte de un navegador web permitiendo mejoras en 
la interfaz de usuario y páginas web dinámicas, en bases de datos locales al navegador, etc.

\subsubsection{JQuery}
jQuery es una biblioteca de JavaScript, creada inicialmente por John Resig, que permite simplificar la manera de interactuar con los documentos HTML,
manipular el árbol DOM, manejar eventos, desarrollar animaciones (FLV) y agregar interacción con la técnica AJAX a páginas web. Cuyas características son:

\begin{itemize}
  \item Selección de elementos DOM.
  \item Interactividad y modificaciones del árbol DOM, incluyendo soporte para CSS 1-3 y un plugin básico de XPath.
  \item Eventos.
  \item Manipulación de la hoja de estilos CSS.
  \item Efectos y animaciones.
  \item Animaciones personalizadas.
  \item AJAX.
  \item Soporta extensiones.
  \item Utilidades varias como obtener información del navegador, operar con objetos y vectores, funciones para rutinas comunes, etc.
  \item Compatible con los navegadores Mozilla Firefox 2.0+, Internet Explorer 6+, Safari 3+, Opera 10.6+ y Google Chrome 8+.
\end{itemize}

\subsection{Apariencia de la Aplicación: CSS y Bootstrap}


Para generar el estilo de nuestra aplicación utilizamos las tecnologías que se describirán a continuación.\\

\subsubsection{CSS (Hojas de estilo)}
Las hojas de estilo en cascada (Cascading Style Sheets, o sus siglas CSS) hacen referencia a un 
lenguaje de hojas de estilos usado para describir la presentación semántica (el aspecto y formato) de un 
documento escrito en lenguaje de marcas. Su aplicación más común es dar estilo a páginas webs escritas en lenguaje HTML y XHTML, 
pero también puede ser aplicado a cualquier tipo de documentos XML, incluyendo SVG y XUL.

\subsubsection{Bootstrap}
Para agilizar el maquetado de las páginas web de la aplicación utilizamos Twitter Bootstrap, que es una colección de herramientas de software
libre para la creación de sitios y aplicaciones web. Contiene plantillas de diseño basadas en HTML y CSS con tipografías, 
formularios, botones, gráficos, barras de navegación y demás componentes de interfaz, así como extensiones opcionales de JavaScript.

\section{Herramientas para Calidad de Código}
\label{2:sec4}

Con el uso de este tipo de herramientas hacemos que nuestro código tenga mayor calidad y sea mas legible por lo demás desarrolladores. En este proyecto se usaron las siguientes:\\
\subsubsection{Pylint}
Pylint es una herramienta que básicamente tiene como función analizar código Python en busca de errores o síntomas de mala calidad en el código fuente.
Cabe destacar que por omisión, la guía de estilo a la que se trata de apegar Pylint es la descrita en el PEP-8 \cite{URL:PEP8}.\\ 

Entre la serie de revisiones que hace Pylint al código fuente se encuentran las siguientes:\\

\begin{itemize}
  \item Revisiones básicas:
    \begin{itemize}
    \item Presencia de cadenas de documentación (docstring).
    \item Nombres de módulos, clases, funciones, métodos, argumentos, variables.
    \item Número de argumentos, variables locales, retornos y sentencias en funciones y métodos.
    \item Atributos requeridos para módulos.
    \item Valores por omisión no recomendados como argumentos.
    \item Redefinición de funciones, métodos, clases.
    \item Uso de declaraciones globales.
    \end{itemize}
  \item Revisión de variables:
    \begin{itemize}
    \item Determina si una variable o \textbf{import} no está siendo usado.
    \item Variables indefinidas.
    \item Redefinición de variables proveniente de módulos builtins o de ámbito externo.
    \item Uso de una variable antes de asignación de valor.
    \item Revisión de clases:
    \item Métodos sin \textbf{self} como primer argumento.
    \item Acceso único a miembros existentes vía \textbf{self}
    \item Atributos no definidos en el método \textbf{\_\_init\_\_}
    \item Código inalcanzable.
    \end{itemize}
  \item Revisión de diseño:
    \begin{itemize}
    \item Número de métodos, atributos, variables locales, entre otros.
    \item Tamaño, complejidad de funciones, métodos, entre otros.
    \end{itemize}
  \item Revisión de imports:
    \begin{itemize}
    \item Dependencias externas.
    \item imports relativos o importe de todos los métodos, variables vía \textbf{*} (wildcard).
    \item Uso de imports cíclicos.
    \item Uso de módulos obsoletos.
    \item Conflictos entre viejo/nuevo estilo:
    \item Uso de \textbf{property}, \textbf{\_\_slots\_\_}, \textbf{super}.
    \item Uso de \textbf{super}.
    \end{itemize}
  \item Revisiones de formato:
    \begin{itemize}
    \item Construcciones no autorizadas.
    \item Sangrado estricto del código.
    \item Longitud de la línea.
    \item \lstinline{Uso de <> en vez de !=}
    \end{itemize}
  \item Otras revisiones:
    \begin{itemize}
    \item Notas de alerta en el código como \textbf{FIXME}, \textbf{XXX}.
    \item Código fuente con caracteres non-ASCII sin tener una declaración de encoding. PEP-263
    \item Búsqueda por similitudes o duplicación en el código fuente.
    \item Revisión de excepciones.
    \item Revisiones de tipo haciendo uso de inferencia de tipos.
    \end{itemize}
\end{itemize}

\subsubsection{Pymetrics}
Pymetrics es similar a la herramienta nombrada anteriormente, produce indicadores para los programas en Python. Estos indicadores incluyen  el indicador de \textbf{Complejidad Ciclomática de McCabe} \cite{URL:McCabe}.
